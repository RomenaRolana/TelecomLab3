<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Дослідження циклічного надлишкового коду ( CRC )</title>
    <style>
        #results {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h2>Дослідження циклічного надлишкового коду ( CRC )</h2>
    <button onclick="generateAndDisplaySequences()">Генерувати та відобразити послідовності</button>
    <div id="results">
        <!-- Тут будуть відображені результати -->
    </div>

    <script>
        const POLYNOMIAL = 0x89D3; // x^16+x^15+x^11+x^9+x^8+x^7+x^5+x^4+x^2+x+1 для CRC-16-T10-DIF

        function generateRandomSequence(length) {
            let sequence = '';
            for (let i = 0; i < length; i++) {
                sequence += Math.round(Math.random()).toString();
            }
            return sequence;
        }

        function computeCRC(data) {
            let crc = 0xFFFF; // Initialize with 0xFFFF instead of 0
            data.split('').forEach((bit, index) => {
                let bitValue = parseInt(bit, 2);
                crc ^= (bitValue << 8);
                for (let i = 0; i < 8; i++) {
                    if (crc & 0x8000) {
                        crc = (crc << 1) ^ POLYNOMIAL;
                    } else {
                        crc <<= 1;
                    }
                }
            });
            return crc.toString(16).toUpperCase();
        }

        function generateAndDisplaySequences() {
            const K = 1000; // Length of the sequence
            const randomSequence = generateRandomSequence(K);
            const crcValue = computeCRC(randomSequence);
            const sequenceWithCRC = randomSequence + crcValue;
            const reComputedCRC = computeCRC(sequenceWithCRC);

            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <p>Generated Sequence: ${randomSequence}</p>
                <p>CRC of Sequence: ${crcValue}</p>
                <p>Sequence with CRC appended: ${sequenceWithCRC}</p>
                <p>Recomputed CRC of the new sequence (should be 0 if correct): ${reComputedCRC}</p>
            `;
        }
    </script>
</body>
</html>


